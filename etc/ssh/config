Host *
    Compression=yes
    ControlMaster auto
    ControlPath ~/.ssh/%r@%h:%p.socket
    ControlPersist 120m
    IdentityFile ~/.ssh/id_rsa
    LocalCommand tmux rename-window %n
    PermitLocalCommand  yes
    ServerAliveCountMax 3
    ServerAliveInterval 60

Host */*
  ProxyCommand ssh -W "$(basename "%h")":%p "$(dirname "%h")"
  UserKnownHostsFile /dev/null
  StrictHostKeyChecking no

Host *+*
  ProxyCommand ssh -W "$(sed -E 's/.*\+//'<<<"%h")":%p "$(sed -E 's/\+[^\+]*//'<<<"%h")"
  UserKnownHostsFile /dev/null
  StrictHostKeyChecking no


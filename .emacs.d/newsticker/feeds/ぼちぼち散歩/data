;; -*- coding: utf-8 -*-
(("ぼちぼち散歩" "Macとかプログラミングとかを書きたいときに書きたいだけ．" "http://relaxedcolumn.blog8.fc2.com/" (20693 49509 788443) feed 0 nil nil ((title nil "ぼちぼち散歩") (link nil "http://relaxedcolumn.blog8.fc2.com/") (description nil "Macとかプログラミングとかを書きたいときに書きたいだけ．") (dc:language nil "ja") (items nil (rdf:Seq nil (rdf:li ((rdf:resource . "http://relaxedcolumn.blog8.fc2.com/blog-entry-170.html"))) (rdf:li ((rdf:resource . "http://relaxedcolumn.blog8.fc2.com/blog-entry-168.html"))) (rdf:li ((rdf:resource . "http://relaxedcolumn.blog8.fc2.com/blog-entry-167.html"))) (rdf:li ((rdf:resource . "http://relaxedcolumn.blog8.fc2.com/blog-entry-165.html"))) (rdf:li ((rdf:resource . "http://relaxedcolumn.blog8.fc2.com/blog-entry-164.html"))))))) ("PythonでVim scriptの関数を定義する" "Vim Advent Calendar 18日目！
こんにちは！Vim Advent Calendar 18日目担当のtsukkeeです。以前にも、vim-users.jpにて、Hack #132: Pythonインタフェースを使う(1)とHack #136: Pythonインタフェースを使う(2)を書かせていただきましたが、今回はさらに面白い？Pythonインタフェースの使い方を紹介したいと思います。
Pythonインタフェース内でVim scriptの関数を定義する
いきなりですが、vim_bridgeというものが既にありま" "http://relaxedcolumn.blog8.fc2.com/blog-entry-170.html" (20204 44656) new 1 nil nil ((link nil "http://relaxedcolumn.blog8.fc2.com/blog-entry-170.html") (title nil "PythonでVim scriptの関数を定義する") (description nil " Vim Advent Calendar 18日目！
こんにちは！Vim Advent Calendar 18日目担当のtsukkeeです。以前にも、vim-users.jpにて、Hack #132: Pythonインタフェースを使う(1)とHack #136: Pythonインタフェースを使う(2)を書かせていただきましたが、今回はさらに面白い？Pythonインタフェースの使い方を紹介したいと思います。
Pythonインタフェース内でVim scriptの関数を定義する
いきなりですが、vim_bridgeというものが既にありま
 ") (content:encoded nil " <h3>Vim Advent Calendar 18日目！</h3><p>こんにちは！<a href=\"http://atnd.org/events/21925\">Vim Advent Calendar</a> 18日目担当のtsukkeeです。以前にも、<a href=\"http://blog.fc2.com/tag/vim\" class=\"tagword\">vim</a>-users.jpにて、<a href=\"http://vim-users.jp/2010/03/hack132/\">Hack #132: Pythonインタフェースを使う(1)</a>と<a href=\"http://vim-users.jp/2010/04/hack136/\">Hack #136: Pythonインタフェースを使う(2)</a>を書かせていただきましたが、今回はさらに面白い？Pythonインタフェースの使い方を紹介したいと思います。</p><h3>Pythonインタフェース内でVim scriptの関数を定義する</h3><p>いきなりですが、<a href=\"http://pypi.python.org/pypi/vim_bridge\">vim_bridge</a>というものが既にあります。これに気づかず再発明してしまったのですが、自分が作ったものの方が自由に関数名を決めれるのでまぁいいことにします^^; サンプルコードは以下のとおりです。</p><script src=\"https://gist.github.com/1490326.js?file=python_vim_function.vim\"></script><p>PythonのデコレータでPythonの関数をVim scriptの関数に変換するところは<a href=\"http://blog.fc2.com/tag/vim\" class=\"tagword\">vim</a>_bridgeと同じですが、今回はデコレータの引数で関数名を指定できるようにしてみました。これによってs:fuga()のようなスクリプトローカスな関数や、例にはありませんが、hoge#fuga#piyo()のようなaudoload関数も定義可能です。</p><h3>まとめ</h3><p>PythonインタフェースはVimによってあったりなかったりするために、あまり広くは使われていません。また、はじめはPythonインタフェースを用いて実装していたものを、ピュアVim scriptにする人もいます。ですが、私はあえてPythonインタフェースを使うことも推奨したいです。逆にVim scriptゼロでVimプラグインを実装するというのも面白いのではないでしょうか？というわけで、18日目終わります！</p> ") (dc:subject nil "Vim") (dc:date nil "2011-12-18T00:00:00+09:00") (dc:creator nil "tsukkee") (dc:publisher nil "FC2-BLOG"))) ("関西Vim勉強会 #7? #8?に参加してきました" "lingr.vimとその中身の簡単な紹介を発表してきた。かなりざっとして説明だったのでどれぐらいの方に分かって頂いたかわからないけど、興味を持って頂ければと。最近は、VimのPythonインタフェース用ライブラリみたいなものも微妙に作り出しているので、将来的にはvitalに仲間入りさせてもらっても良いのかも。それぐらい洗練させれたらいいな。
関西Vim勉強会#7 lingr.vimとその中身   View more presentations from tsukkee _" "http://relaxedcolumn.blog8.fc2.com/blog-entry-168.html" (19909 6811) new 2 nil nil ((link nil "http://relaxedcolumn.blog8.fc2.com/blog-entry-168.html") (title nil "関西Vim勉強会 #7? #8?に参加してきました") (description nil " lingr.vimとその中身の簡単な紹介を発表してきた。かなりざっとして説明だったのでどれぐらいの方に分かって頂いたかわからないけど、興味を持って頂ければと。最近は、VimのPythonインタフェース用ライブラリみたいなものも微妙に作り出しているので、将来的にはvitalに仲間入りさせてもらっても良いのかも。それぐらい洗練させれたらいいな。
 関西Vim勉強会#7 lingr.vimとその中身   View more presentations from tsukkee _  
 ") (content:encoded nil " <p><a href=\"https://github.com/tsukkee/lingr-vim\">lingr.vim</a>とその中身の簡単な紹介を発表してきた。かなりざっとして説明だったのでどれぐらいの方に分かって頂いたかわからないけど、興味を持って頂ければと。最近は、<a href=\"https://github.com/tsukkee/lingr-vim/blob/vimutil/autoload/vimutil.py\">VimのPythonインタフェース用ライブラリみたいなもの</a>も微妙に作り出しているので、将来的には<a href=\"https://github.com/ujihisa/vital.vim\">vital</a>に仲間入りさせてもらっても良いのかも。それぐらい洗練させれたらいいな。</p><div style=\"width:425px\" id=\"__ss_7865847\"><strong style=\"display:block;margin:12px 0 4px\"><a href=\"http://www.slideshare.net/tsukkee/vim7-lingrvim-7865847\" title=\"関西Vim勉強会#7 lingr.vimとその中身\">関西Vim勉強会#7 lingr.vimとその中身</a></strong><iframe src=\"http://www.slideshare.net/slideshow/embed_code/7865847\" width=\"425\" height=\"355\" frameborder=\"0\" marginwidth=\"0\" marginheight=\"0\" scrolling=\"no\"></iframe><div style=\"padding:5px 0 12px\"> View more <a href=\"http://www.slideshare.net/\">presentations</a> from <a href=\"http://www.slideshare.net/tsukkee\">tsukkee _</a></div></div><p>他の方々の発表としては、ujihisaさんによるいくつかのプラグインの紹介とvitalの紹介、Sixeightさんによるrails.vimの紹介、kozo-niさんによるVundleの紹介があった。特に、Vundleは自分も最近つかいはじめて、超適当なhgおよびsvn対応版も<a href=\"https://github.com/tsukkee/vundle/tree/other_repos_support\">勝手につくっている</a>ので、参考になった。作者がいい人っぽいというのは、自分も感じていて、GitHubにはマメにコメントしてくれるし、lingrのvim-users.jp部屋にも遊びにきてくれるしで、すごい親しみやすい人だとおもう。hgとsvnサポートも本家が近いうちにやってくれそうな感じなので期待している。</p><p>というわけで、主催してくださったujihisaさんをはじめ、参加者の皆様お疲れ様でした！</p> ") (dc:subject nil "Vim") (dc:date nil "2011-05-07T19:10:35+09:00") (dc:creator nil "tsukkee") (dc:publisher nil "FC2-BLOG"))) ("iTerm2が（当初に比べて）むちゃくちゃ速くなったのでurxvtとかいらなくなった" "これまで理想の(?)ターミナル環境を求めてMacでurxvtをいろいろゴニョゴニョしてきたけど，iTerm2がr176でかなり速くなり，r191でさらに速くなって，十分実用的になった．iTerm2なら256色表示できて，普通にコピペできて，Ambiguous Widthな文字をdoubleで表示するオプションもあって， 半透明表示もできて，なんというかもうこれでいいです．
たぶん，次のalphaバージョンでこの高速化が入るけど，待ち切れない人は，Xcode入れて" "http://relaxedcolumn.blog8.fc2.com/blog-entry-167.html" (19618 62129) new 3 nil nil ((link nil "http://relaxedcolumn.blog8.fc2.com/blog-entry-167.html") (title nil "iTerm2が（当初に比べて）むちゃくちゃ速くなったのでurxvtとかいらなくなった") (description nil " これまで理想の(?)ターミナル環境を求めてMacでurxvtをいろいろゴニョゴニョしてきたけど，iTerm2がr176でかなり速くなり，r191でさらに速くなって，十分実用的になった．iTerm2なら256色表示できて，普通にコピペできて，Ambiguous Widthな文字をdoubleで表示するオプションもあって， 半透明表示もできて，なんというかもうこれでいいです．
たぶん，次のalphaバージョンでこの高速化が入るけど，待ち切れない人は，Xcode入れて
 ") (content:encoded nil " <p>これまで理想の(?)ターミナル環境を求めてMacでurxvtをいろいろゴニョゴニョしてきたけど，iTerm2が<a href=\"http://code.google.com/p/iterm2/source/detail?r=176\">r176</a>でかなり速くなり，<a href=\"http://code.google.com/p/iterm2/source/detail?r=191\">r191</a>でさらに速くなって，十分実用的になった．iTerm2なら256色表示できて，普通にコピペできて，Ambiguous Widthな文字をdoubleで表示するオプションもあって， 半透明表示もできて，なんというかもうこれでいいです．</p><p>たぶん，次のalphaバージョンでこの高速化が入るけど，待ち切れない人は，Xcode入れて，svn checkoutして，make Deploymentすれば簡単にビルドできます．</p><ins><p>2010/9/30 追記: <a href=\"http://code.google.com/p/iterm2/source/detail?r=196\">r196</a>で64bit化したせいかわからないけど，もうちょい速くなってた．<a href=\"http://code.google.com/p/iterm2/issues/detail?id=143#c7\">これ</a>がr176あたりで自分が試したやつやけど，r196では同じベンチマークスクリプトが0.7?0.8秒ぐらいで走るようになってる．単純計算で当初の6倍速か．Appleなら6x fasterとか宣伝できるレベルw</p></ins><ins><p>2010/10/1 さらに追記: ちょっと気になったのでTerminal.appやurxvtでのベンチもついでに．やってみた．それぞれMacBook Pro 15&quot;(MacOS X 10.6.4, 2.4 GHz Core i5, 8 GB Memory)上で150x55，フォントはMenloの13ptに設定し，/bin/bash上で以下のスクリプトを<code>time ./scroll_bench 100000</code>として3回走らせた結果の平均である．さすがにTerminal.appよりかは少し遅いけどurxvtよりも速くなっている．</p><table><tr><th>ターミナル</th><th>real [sec]</th><th>user [sec]</th><th>sys [sec]</th></tr><tr><td>iTerm2 r175</td><td>4.436</td><td>0.209</td><td>0.205</td></tr><tr><td>iTerm2 r176</td><td>1.852</td><td>0.211</td><td>0.202</td></tr><tr><td>iTerm2 r196</td><td>0.803</td><td>0.210</td><td>0.211</td></tr><tr><td>Terminal.app</td><td>0.629</td><td>0.192</td><td>0.165</td></tr><tr><td>urxvt 9.07 on XQuartz 2.5.3</td><td>2.427</td><td>0.177</td><td>0.142</td></tr></table><script src=\"http://gist.github.com/605700.js?file=scroll_bench.c\"></script></ins> ") (dc:subject nil "Mac") (dc:date nil "2010-09-29T17:02:57+09:00") (dc:creator nil "tsukkee") (dc:publisher nil "FC2-BLOG"))) ("MacのX11でurxvtとMozcを使う設定とか" "前回からもう少し環境を整えたので．それについて書いていく．前回同様，X11やらMacPortsやらの環境は整っている前提です．
urxvtのインストール
MacPortsで入れてもいいけど，新しい物好きなのでCVSの最新を持ってくる（多分MacPortsので問題なし）．適当なフォルダで以下を実行．
cvs -z3 -d :pserver:anonymous@cvs.schmorp.de/schmorpforge co rxvt-unicode
cd rxvt-unicode
./autogen.sh
./configure --enable-everyt" "http://relaxedcolumn.blog8.fc2.com/blog-entry-165.html" (19601 3235) new 4 nil nil ((link nil "http://relaxedcolumn.blog8.fc2.com/blog-entry-165.html") (title nil "MacのX11でurxvtとMozcを使う設定とか") (description nil " 前回からもう少し環境を整えたので．それについて書いていく．前回同様，X11やらMacPortsやらの環境は整っている前提です．

urxvtのインストール
MacPortsで入れてもいいけど，新しい物好きなのでCVSの最新を持ってくる（多分MacPortsので問題なし）．適当なフォルダで以下を実行．
cvs -z3 -d :pserver:anonymous@cvs.schmorp.de/schmorpforge co rxvt-unicode
cd rxvt-unicode
./autogen.sh
./configure --enable-everyt
 ") (content:encoded nil " <p><a href=\"http://relaxedcolumn.blog8.fc2.com/blog-entry-160.html\">前回</a>からもう少し環境を整えたので．それについて書いていく．前回同様，X11やらMacPortsやらの環境は整っている前提です．</p><h3>urxvtのインストール</h3><p>MacPortsで入れてもいいけど，新しい物好きなのでCVSの最新を持ってくる（多分MacPortsので問題なし）．適当なフォルダで以下を実行．</p><pre><code>cvs -z3 -d :pserver:anonymous@cvs.schmorp.de/schmorpforge co rxvt-unicode
cd rxvt-unicode
./autogen.sh
./configure --enable-everything --with-codesets=all --enable-256-color 
make
cd src
sudo make install
cd ../doc
sudo make install</code></pre><p>.Xdefaultsは前回からいろいろ変更してみた．まず，フォントは<a href=\"http://www.levien.com/type/myfonts/inconsolata.html\">Inconsolata</a>にしていて，<a href=\"http://d.hatena.ne.jp/hchbaw/20100901/1283347188\">ターミナルでC-,やC-.に割り当てたい、rxvt-unicodeで。 - hchbaw記</a>を参考に&lt;C-,&gt;や&lt;C-.&gt;を擬似的に使えるように設定している．</p><script src=\"http://gist.github.com/581098.js?file=.Xdefaults\"></script><p>あと，Command-CとCommand-VでMacのクリップボードを使ったコピペできるように設定している．これには，もともとmacosx-clipboardというPerlモジュールがurxvtに付属しているものの，日本語が文字化けすることがあったので，<a href=\"https://trac.macports.org/ticket/17434\">#17434 (rxvt-unicode 9.06 macosx-clipboard module doesn't work) &#8211; MacPorts</a>で見つけてきたのを少し改変したものを使っている．以下の内容でmacosx-clipboard-pbocpyという名前で/usr/local/lib/urxvt/perl（MacPortsで入れた場合は/opt/local/lib/urxvt/perl）に配置すればOK．</p><script src=\"http://gist.github.com/581098.js?file=macosx-clipboard-pbcopy\"></script><h3>MacUIMでMozc</h3><p>最近のMacUIMではMozcを使えるので利用する．.xinitrcの該当箇所を以下のように変更．</p><pre><code>/Library/Frameworks/UIM.framework/Versions/Current/bin/uim-xim --engine=mozc &</code></pre><p>ここで，システム環境設定.appのMacUIM→uim→全体設定→使用可能にする入力方式でMozcを有効にしておかないとMozcを使えないので注意．古いバージョンからアップデートすると前の設定が残っていせいで有効になっていないことがあるみたい（自分はここでだいぶはまった^^;）．</p><p>Mozc自体の設定はMacUIMの設定や/Library/Mozc/MozcTools.appから行うことができる．辞書ツールは<a href=\"http://ekato.wordpress.com/2010/09/15/macuim-0-6-8-5/\">MacUIM 0.6.8-5 &#171; ekato’s note</a>にある通りパッケージをひらいて中身を直接実行する必要がある．その他，かな/英数キーでのon/offなど前回と同じように設定する．</p><p>Mozcが素晴らしいところは，このようにGUIで設定したものをちゃんとX11の環境で使える上に，Google日本語入力と辞書を共有できるところである．自分は普段Google日本語入力を使っているので，これのおかげで，X11環境でもだいぶ違和感なく日本語を入力できるようになった．</p><h3>まとめ</h3><p>日本語入力やコピペをだいぶ通常の環境に近づけられたので，プログラムを各環境としては不満はなくなりつつある．現状困るのは，Eastern Asian Ambiguous Widthな文字（◯とか■とか）が正しく表示されないことと，背景透過は今のところ無理っぽいところぐらいである．背景透過はどうでもいいっちゃいいので，Ambiguous Widthの問題だけなんとか解決できないものか．</p><p>urxvt以外では，最近はiTerm2.appも出てきてそっちも気になるけど<a href=\"http://code.google.com/p/iterm2/issues/detail?id=130\">ここらへん</a>とかが解決しない限り使い物にならない．Terminal.appも<a href=\"http://niw.at/articles/2007/11/02/TerminalColoreopard/ja\">yoshimasa niwa - TerminalColoreopard LeopardのターミナルのANSI配色を変えるツール</a>や<a href=\"http://kita.dyndns.org/wiki/?TerminalEastAsianAmbiguousClearer\">ワタタツのウィッ記 - TerminalEastAsianAmbiguousClearer</a>，<a href=\"http://apribase.net/2010/08/28/ap_dark8/\">Apribase &#187; Visor + tmux + vim のための8色カラースキーマ ap_dark8 公開</a>を使えばいいけど，個人的には256色欲しいのでやっぱり当分はurxvtの予感．</p><p>あと，最近はscreenの代わりにtmuxを使ってみているけど，それについてはまたそのうち．</p> ") (dc:subject nil "Mac") (dc:date nil "2010-09-16T03:12:51+09:00") (dc:creator nil "tsukkee") (dc:publisher nil "FC2-BLOG"))) ("del.icio.us IncSearch用のスクリプトを更新した" "またもや久々のブログ更新．以前に書いてたやつをリファクタリングして，tweetbuzzもくっつけてみた．
del.icio.us IncSearchは，今回みたいに勝手に拡張したり，Vimperatorと組み合わせたり，個人的には最強に重宝しています．" "http://relaxedcolumn.blog8.fc2.com/blog-entry-164.html" (19491 12338) new 5 nil nil ((link nil "http://relaxedcolumn.blog8.fc2.com/blog-entry-164.html") (title nil "del.icio.us IncSearch用のスクリプトを更新した") (description nil " またもや久々のブログ更新．以前に書いてたやつをリファクタリングして，tweetbuzzもくっつけてみた．
del.icio.us IncSearchは，今回みたいに勝手に拡張したり，Vimperatorと組み合わせたり，個人的には最強に重宝しています．
 ") (content:encoded nil " <p>またもや久々のブログ更新．<a href=\"http://relaxedcolumn.blog8.fc2.com/blog-entry-107.html\">以前に書いてたやつ</a>をリファクタリングして，tweetbuzzもくっつけてみた．</p><p>del.icio.us IncSearchは，今回みたいに勝手に拡張したり，<a href=\"http://relaxedcolumn.blog8.fc2.com/blog-entry-156.html\">Vimperatorと組み合わせたり</a>，個人的には最強に重宝しています．</p><script src=\"http://gist.github.com/4358.js\"></script>
 ") (dc:subject nil "Mac") (dc:date nil "2010-06-24T19:15:14+09:00") (dc:creator nil "tsukkee") (dc:publisher nil "FC2-BLOG"))))